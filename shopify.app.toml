# Learn more about configuring your app at https://shopify.dev/docs/apps/tools/cli/configuration

client_id = "109e82bde293da48ccecb6f05cd99ef3"
name = "spicy-pickle"
application_url = "https://spicy-pickle-990586804218.australia-southeast1.run.app"
embedded = true

[build]
automatically_update_urls_on_dev = true

[webhooks]
api_version = "2026-04"

  [[webhooks.subscriptions]]
  topics = [ "app/uninstalled" ]
  uri = "/webhooks/app/uninstalled"

  [[webhooks.subscriptions]]
  topics = [ "app/scopes_update" ]
  uri = "/webhooks/app/scopes_update"

  # Inventory webhook for bundle sync
  # Option 1: Direct HTTPS (simpler, works for most use cases)
  [[webhooks.subscriptions]]
  topics = [ "inventory_levels/update" ]
  uri = "/webhooks/inventory"

  # Option 2: Google Cloud Pub/Sub (for high-volume, reliable processing)
  # Uncomment below and comment out HTTPS above to use Pub/Sub
  # [[webhooks.subscriptions]]
  # topics = [ "inventory_levels/update" ]
  # uri = "pubsub://spicy-pickle-484622:spicy-pickle-inventory-webhooks"

[access_scopes]
# Learn more at https://shopify.dev/docs/apps/tools/cli/configuration#access_scopes
# Required scopes for Spicy Pickle:
# - Products: Read/write for bundle configuration and metafields
# - Inventory: Read/write for bundle inventory sync
# - Orders: Read for pick list generation
scopes = "read_products,write_products,read_inventory,write_inventory,read_orders"

[auth]
redirect_urls = [ "https://spicy-pickle-990586804218.australia-southeast1.run.app/auth/callback" ]
